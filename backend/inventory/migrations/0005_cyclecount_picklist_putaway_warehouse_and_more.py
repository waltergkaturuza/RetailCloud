# Generated by Django 4.2.7 on 2025-12-12 10:49

from decimal import Decimal
from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('core', '0014_add_module_details'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('suppliers', '0001_initial'),
        ('inventory', '0004_add_return_movement_types'),
    ]

    operations = [
        migrations.CreateModel(
            name='CycleCount',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('count_number', models.CharField(max_length=100, unique=True)),
                ('count_type', models.CharField(choices=[('full', 'Full Count'), ('partial', 'Partial Count'), ('spot', 'Spot Check'), ('location', 'Location Based'), ('category', 'Category Based'), ('abc', 'ABC Analysis Based')], max_length=30)),
                ('count_method', models.CharField(choices=[('blind', 'Blind Count'), ('known', 'Known Count'), ('freeze', 'Freeze Count')], default='known', max_length=30)),
                ('status', models.CharField(choices=[('planned', 'Planned'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('approved', 'Approved'), ('cancelled', 'Cancelled')], default='planned', max_length=30)),
                ('start_date', models.DateTimeField(blank=True, null=True)),
                ('end_date', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('variance_threshold_percent', models.DecimalField(decimal_places=2, default=Decimal('5.00'), help_text='Acceptable variance percentage', max_digits=5)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_cycle_counts', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_cycle_counts', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cycle_counts', to='core.tenant')),
            ],
            options={
                'db_table': 'cycle_counts',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PickList',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('pick_list_number', models.CharField(max_length=100, unique=True)),
                ('reference_type', models.CharField(choices=[('sale', 'Sale Order'), ('transfer', 'Transfer Order'), ('return', 'Return'), ('adjustment', 'Adjustment'), ('custom', 'Custom')], max_length=50)),
                ('reference_id', models.CharField(max_length=255)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('assigned', 'Assigned'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='pending', max_length=30)),
                ('priority', models.CharField(choices=[('low', 'Low'), ('normal', 'Normal'), ('high', 'High'), ('urgent', 'Urgent')], default='normal', max_length=20)),
                ('picking_strategy', models.CharField(choices=[('fifo', 'First In First Out'), ('fefo', 'First Expiry First Out'), ('lifo', 'Last In First Out'), ('manual', 'Manual Selection')], default='fifo', max_length=30)),
                ('started_at', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_pick_lists', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_pick_lists', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pick_lists', to='core.tenant')),
            ],
            options={
                'db_table': 'pick_lists',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PutAway',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('put_away_number', models.CharField(max_length=100, unique=True)),
                ('reference_type', models.CharField(help_text='Purchase, Transfer In, etc.', max_length=50)),
                ('reference_id', models.CharField(max_length=255)),
                ('put_away_strategy', models.CharField(choices=[('fixed', 'Fixed Location'), ('random', 'Random Location'), ('zone', 'Zone Based'), ('closest', 'Closest to Receiving'), ('fifo', 'First In First Out'), ('fefo', 'First Expiry First Out')], default='random', max_length=30)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('assigned', 'Assigned'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='pending', max_length=30)),
                ('started_at', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_put_aways', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='put_aways', to='core.tenant')),
            ],
            options={
                'db_table': 'put_aways',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Warehouse',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('code', models.CharField(max_length=50)),
                ('warehouse_type', models.CharField(choices=[('main', 'Main Warehouse'), ('distribution', 'Distribution Center'), ('transit', 'Transit Warehouse'), ('store', 'Store Warehouse'), ('virtual', 'Virtual Warehouse')], default='main', max_length=30)),
                ('address', models.TextField(blank=True)),
                ('city', models.CharField(blank=True, max_length=100)),
                ('state_province', models.CharField(blank=True, max_length=100)),
                ('postal_code', models.CharField(blank=True, max_length=20)),
                ('country', models.CharField(blank=True, max_length=100)),
                ('contact_person', models.CharField(blank=True, max_length=255)),
                ('phone', models.CharField(blank=True, max_length=50)),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('is_active', models.BooleanField(default=True)),
                ('capacity_cubic_meters', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('capacity_units', models.IntegerField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('branch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='warehouses', to='core.branch')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='warehouses', to='core.tenant')),
            ],
            options={
                'db_table': 'warehouses',
            },
        ),
        migrations.CreateModel(
            name='WarehouseLocation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('location_code', models.CharField(help_text='e.g., A-01-S-02-B-03 (Aisle-Shelf-Bin)', max_length=100)),
                ('aisle', models.CharField(blank=True, max_length=50)),
                ('shelf', models.CharField(blank=True, max_length=50)),
                ('bin', models.CharField(blank=True, max_length=50)),
                ('zone', models.CharField(blank=True, help_text='Zone designation (Receiving, Picking, Storage, etc.)', max_length=50)),
                ('location_type', models.CharField(choices=[('receiving', 'Receiving'), ('picking', 'Picking'), ('storage', 'Storage'), ('quarantine', 'Quarantine'), ('damaged', 'Damaged Goods'), ('bulk', 'Bulk Storage'), ('cold_storage', 'Cold Storage'), ('frozen', 'Frozen Storage')], default='storage', max_length=30)),
                ('max_capacity', models.IntegerField(blank=True, help_text='Maximum units that can be stored', null=True)),
                ('current_capacity', models.IntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
                ('allows_mixed_items', models.BooleanField(default=False, help_text='Can store multiple products')),
                ('is_fast_moving', models.BooleanField(default=False, help_text='Optimized for fast-moving items')),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='warehouse_locations', to='core.tenant')),
                ('warehouse', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='locations', to='inventory.warehouse')),
            ],
            options={
                'db_table': 'warehouse_locations',
            },
        ),
        migrations.CreateModel(
            name='WarehouseTransfer',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('transfer_number', models.CharField(max_length=100, unique=True)),
                ('transfer_type', models.CharField(choices=[('warehouse_to_warehouse', 'Warehouse to Warehouse'), ('warehouse_to_branch', 'Warehouse to Branch'), ('branch_to_warehouse', 'Branch to Warehouse'), ('branch_to_branch', 'Branch to Branch')], max_length=30)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('requested', 'Requested'), ('approved', 'Approved'), ('shipped', 'Shipped'), ('in_transit', 'In Transit'), ('received', 'Received'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='draft', max_length=30)),
                ('requested_date', models.DateTimeField(blank=True, null=True)),
                ('approved_date', models.DateTimeField(blank=True, null=True)),
                ('shipped_date', models.DateTimeField(blank=True, null=True)),
                ('received_date', models.DateTimeField(blank=True, null=True)),
                ('completed_date', models.DateTimeField(blank=True, null=True)),
                ('shipping_method', models.CharField(blank=True, max_length=100)),
                ('tracking_number', models.CharField(blank=True, max_length=255)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_transfers', to=settings.AUTH_USER_MODEL)),
                ('from_branch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='transfers_out', to='core.branch')),
                ('from_warehouse', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transfers_out', to='inventory.warehouse')),
                ('received_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='received_transfers', to=settings.AUTH_USER_MODEL)),
                ('requested_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='requested_transfers', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='warehouse_transfers', to='core.tenant')),
                ('to_branch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='transfers_in', to='core.branch')),
                ('to_warehouse', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transfers_in', to='inventory.warehouse')),
            ],
            options={
                'db_table': 'warehouse_transfers',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='WarehouseTransferItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantity_requested', models.IntegerField(validators=[django.core.validators.MinValueValidator(1)])),
                ('quantity_shipped', models.IntegerField(default=0)),
                ('quantity_received', models.IntegerField(default=0)),
                ('unit_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('batch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.batch')),
                ('from_location', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transfer_out_items', to='inventory.warehouselocation')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.product')),
                ('to_location', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transfer_in_items', to='inventory.warehouselocation')),
                ('transfer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='inventory.warehousetransfer')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='inventory.productvariant')),
            ],
            options={
                'db_table': 'warehouse_transfer_items',
            },
        ),
        migrations.CreateModel(
            name='SupplierPerformance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('analysis_period_start', models.DateField()),
                ('analysis_period_end', models.DateField()),
                ('total_orders', models.IntegerField(default=0)),
                ('total_quantity_ordered', models.IntegerField(default=0)),
                ('total_quantity_received', models.IntegerField(default=0)),
                ('total_value_ordered', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('total_value_received', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('on_time_deliveries', models.IntegerField(default=0)),
                ('late_deliveries', models.IntegerField(default=0)),
                ('early_deliveries', models.IntegerField(default=0)),
                ('average_lead_time_days', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('on_time_delivery_rate', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Percentage', max_digits=5)),
                ('fill_rate', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Percentage of ordered quantity received', max_digits=5)),
                ('quality_score', models.DecimalField(blank=True, decimal_places=2, help_text='1-10 scale', max_digits=5, null=True)),
                ('return_rate', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Percentage of items returned', max_digits=5)),
                ('overall_rating', models.DecimalField(blank=True, decimal_places=2, help_text='Overall performance rating', max_digits=3, null=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('product', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='supplier_performances', to='inventory.product')),
                ('supplier', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='performances', to='suppliers.supplier')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='supplier_performances', to='core.tenant')),
            ],
            options={
                'db_table': 'supplier_performances',
            },
        ),
        migrations.CreateModel(
            name='StockLocation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantity', models.IntegerField(validators=[django.core.validators.MinValueValidator(0)])),
                ('reserved_quantity', models.IntegerField(default=0)),
                ('put_away_date', models.DateTimeField(auto_now_add=True)),
                ('last_picked_at', models.DateTimeField(blank=True, null=True)),
                ('last_counted_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('batch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.batch')),
                ('branch', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stock_locations', to='core.branch')),
                ('location', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stock_items', to='inventory.warehouselocation')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stock_locations', to='inventory.product')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stock_locations', to='core.tenant')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='inventory.productvariant')),
                ('warehouse', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stock_allocations', to='inventory.warehouse')),
            ],
            options={
                'db_table': 'stock_locations',
            },
        ),
        migrations.CreateModel(
            name='StockAging',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('analysis_date', models.DateField()),
                ('total_quantity', models.IntegerField()),
                ('quantity_0_30_days', models.IntegerField(default=0)),
                ('quantity_31_60_days', models.IntegerField(default=0)),
                ('quantity_61_90_days', models.IntegerField(default=0)),
                ('quantity_91_180_days', models.IntegerField(default=0)),
                ('quantity_181_365_days', models.IntegerField(default=0)),
                ('quantity_over_365_days', models.IntegerField(default=0)),
                ('total_value', models.DecimalField(decimal_places=2, max_digits=12)),
                ('value_0_30_days', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('value_31_60_days', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('value_61_90_days', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('value_91_180_days', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('value_181_365_days', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('value_over_365_days', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('oldest_stock_date', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('batch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.batch')),
                ('branch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='stock_agings', to='core.branch')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stock_agings', to='inventory.product')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stock_agings', to='core.tenant')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='inventory.productvariant')),
            ],
            options={
                'db_table': 'stock_agings',
            },
        ),
        migrations.CreateModel(
            name='SafetyStock',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('calculation_method', models.CharField(choices=[('fixed', 'Fixed Amount'), ('days_of_cover', 'Days of Cover'), ('statistical', 'Statistical (Std Dev)'), ('service_level', 'Service Level Based'), ('max_min', 'Max-Min Method')], default='statistical', max_length=30)),
                ('fixed_safety_stock', models.IntegerField(blank=True, null=True)),
                ('days_of_cover', models.IntegerField(blank=True, help_text='Days of inventory to keep as safety stock', null=True)),
                ('service_level_percent', models.DecimalField(decimal_places=2, default=Decimal('95.00'), help_text='Desired service level percentage', max_digits=5)),
                ('lead_time_days', models.DecimalField(decimal_places=2, default=Decimal('7.00'), max_digits=8)),
                ('average_daily_demand', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('standard_deviation', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('calculated_safety_stock', models.IntegerField(blank=True, null=True)),
                ('current_stock_level', models.IntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
                ('last_calculated_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('branch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='safety_stocks', to='core.branch')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='safety_stocks', to='inventory.product')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='safety_stocks', to='core.tenant')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='inventory.productvariant')),
            ],
            options={
                'db_table': 'safety_stocks',
            },
        ),
        migrations.CreateModel(
            name='PutAwayItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantity', models.IntegerField(validators=[django.core.validators.MinValueValidator(1)])),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('putting', 'Putting Away'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='pending', max_length=20)),
                ('notes', models.TextField(blank=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('actual_location', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='put_away_items', to='inventory.warehouselocation')),
                ('batch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.batch')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.product')),
                ('put_away', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='inventory.putaway')),
                ('suggested_location', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.warehouselocation')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='inventory.productvariant')),
            ],
            options={
                'db_table': 'put_away_items',
            },
        ),
        migrations.AddField(
            model_name='putaway',
            name='warehouse',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='put_aways', to='inventory.warehouse'),
        ),
        migrations.CreateModel(
            name='PickListItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantity_required', models.IntegerField(validators=[django.core.validators.MinValueValidator(1)])),
                ('quantity_picked', models.IntegerField(default=0)),
                ('sequence', models.IntegerField(default=0, help_text='Picking sequence order')),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('picking', 'Picking'), ('picked', 'Picked'), ('short', 'Short'), ('cancelled', 'Cancelled')], default='pending', max_length=20)),
                ('notes', models.TextField(blank=True)),
                ('picked_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('batch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.batch')),
                ('pick_list', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='inventory.picklist')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.product')),
                ('stock_location', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.stocklocation')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='inventory.productvariant')),
            ],
            options={
                'db_table': 'pick_list_items',
                'ordering': ['sequence', 'id'],
            },
        ),
        migrations.AddField(
            model_name='picklist',
            name='warehouse',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pick_lists', to='inventory.warehouse'),
        ),
        migrations.CreateModel(
            name='InventoryWriteOff',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('write_off_number', models.CharField(max_length=100, unique=True)),
                ('write_off_type', models.CharField(choices=[('damage', 'Damaged'), ('loss', 'Loss/Theft'), ('obsolete', 'Obsolete'), ('expired', 'Expired'), ('quality', 'Quality Issue'), ('other', 'Other')], max_length=30)),
                ('quantity', models.IntegerField(validators=[django.core.validators.MinValueValidator(1)])),
                ('unit_cost', models.DecimalField(decimal_places=2, max_digits=10)),
                ('total_value', models.DecimalField(decimal_places=2, max_digits=12)),
                ('reason', models.TextField()),
                ('approval_status', models.CharField(choices=[('pending', 'Pending Approval'), ('approved', 'Approved'), ('rejected', 'Rejected')], default='pending', max_length=30)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('batch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.batch')),
                ('branch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='write_offs', to='core.branch')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_write_offs', to=settings.AUTH_USER_MODEL)),
                ('location', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.warehouselocation')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='write_offs', to='inventory.product')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='inventory_write_offs', to='core.tenant')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='inventory.productvariant')),
                ('warehouse', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.warehouse')),
            ],
            options={
                'db_table': 'inventory_write_offs',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='InventoryValuation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('valuation_method', models.CharField(choices=[('fifo', 'FIFO (First In First Out)'), ('lifo', 'LIFO (Last In First Out)'), ('weighted_average', 'Weighted Average'), ('specific_identification', 'Specific Identification')], default='fifo', max_length=30)),
                ('current_cost', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Current weighted average cost', max_digits=10)),
                ('total_quantity', models.IntegerField(default=0)),
                ('total_value', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('last_valuation_date', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('branch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='valuations', to='core.branch')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='valuations', to='inventory.product')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='inventory_valuations', to='core.tenant')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='inventory.productvariant')),
            ],
            options={
                'db_table': 'inventory_valuations',
            },
        ),
        migrations.CreateModel(
            name='DeadStock',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('analysis_date', models.DateField()),
                ('current_quantity', models.IntegerField()),
                ('current_value', models.DecimalField(decimal_places=2, max_digits=12)),
                ('days_since_last_sale', models.IntegerField(blank=True, null=True)),
                ('days_since_last_movement', models.IntegerField(blank=True, null=True)),
                ('average_days_to_sell', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('projected_sell_through_days', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('classification', models.CharField(choices=[('active', 'Active'), ('slow_moving', 'Slow Moving'), ('very_slow', 'Very Slow Moving'), ('dead', 'Dead Stock'), ('obsolete', 'Obsolete')], max_length=30)),
                ('recommendation', models.CharField(blank=True, choices=[('continue', 'Continue Selling'), ('promote', 'Promote/Discount'), ('return', 'Return to Supplier'), ('donate', 'Donate'), ('dispose', 'Dispose'), ('liquidate', 'Liquidate')], max_length=30)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('branch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='dead_stocks', to='core.branch')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='dead_stock_analyses', to='inventory.product')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='dead_stocks', to='core.tenant')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='inventory.productvariant')),
            ],
            options={
                'db_table': 'dead_stocks',
            },
        ),
        migrations.CreateModel(
            name='CycleCountItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('system_quantity', models.IntegerField(help_text='Quantity according to system')),
                ('counted_quantity', models.IntegerField(blank=True, null=True)),
                ('variance', models.IntegerField(default=0, help_text='counted - system')),
                ('variance_percent', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5)),
                ('is_variance_acceptable', models.BooleanField(default=True)),
                ('counted_at', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('counted', 'Counted'), ('verified', 'Verified'), ('adjusted', 'Adjusted')], default='pending', max_length=20)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('batch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.batch')),
                ('counted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('cycle_count', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='inventory.cyclecount')),
                ('location', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.warehouselocation')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.product')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='inventory.productvariant')),
            ],
            options={
                'db_table': 'cycle_count_items',
            },
        ),
        migrations.AddField(
            model_name='cyclecount',
            name='warehouse',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cycle_counts', to='inventory.warehouse'),
        ),
        migrations.CreateModel(
            name='CostLayer',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('receipt_date', models.DateField()),
                ('quantity', models.IntegerField(validators=[django.core.validators.MinValueValidator(0)])),
                ('remaining_quantity', models.IntegerField(validators=[django.core.validators.MinValueValidator(0)])),
                ('unit_cost', models.DecimalField(decimal_places=2, max_digits=10)),
                ('total_cost', models.DecimalField(decimal_places=2, max_digits=12)),
                ('reference_type', models.CharField(blank=True, max_length=50)),
                ('reference_id', models.CharField(blank=True, max_length=255)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('batch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.batch')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cost_layers', to='core.tenant')),
                ('valuation', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cost_layers', to='inventory.inventoryvaluation')),
            ],
            options={
                'db_table': 'cost_layers',
                'ordering': ['receipt_date', 'id'],
            },
        ),
        migrations.CreateModel(
            name='CostAdjustment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('adjustment_number', models.CharField(max_length=100, unique=True)),
                ('adjustment_type', models.CharField(choices=[('increase', 'Cost Increase'), ('decrease', 'Cost Decrease'), ('revaluation', 'Revaluation'), ('correction', 'Correction')], max_length=30)),
                ('old_cost', models.DecimalField(decimal_places=2, max_digits=10)),
                ('new_cost', models.DecimalField(decimal_places=2, max_digits=10)),
                ('quantity', models.IntegerField()),
                ('adjustment_amount', models.DecimalField(decimal_places=2, help_text='Total adjustment value', max_digits=12)),
                ('reason', models.TextField()),
                ('reference_type', models.CharField(blank=True, max_length=50)),
                ('reference_id', models.CharField(blank=True, max_length=255)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('branch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='cost_adjustments', to='core.branch')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_cost_adjustments', to=settings.AUTH_USER_MODEL)),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cost_adjustments', to='inventory.product')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cost_adjustments', to='core.tenant')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='inventory.productvariant')),
            ],
            options={
                'db_table': 'cost_adjustments',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ABCAnalysis',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('analysis_date', models.DateField()),
                ('analysis_type', models.CharField(choices=[('abc', 'ABC Analysis (Value)'), ('xyz', 'XYZ Analysis (Variability)'), ('abc_xyz', 'ABC-XYZ Combined')], max_length=10)),
                ('abc_class', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C')], help_text='A = High Value, B = Medium Value, C = Low Value', max_length=1)),
                ('cumulative_value_percent', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('cumulative_quantity_percent', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('annual_usage_value', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('annual_usage_quantity', models.IntegerField(blank=True, null=True)),
                ('xyz_class', models.CharField(blank=True, choices=[('X', 'X'), ('Y', 'Y'), ('Z', 'Z')], help_text='X = Low Variability, Y = Medium Variability, Z = High Variability', max_length=1)),
                ('coefficient_of_variation', models.DecimalField(blank=True, decimal_places=4, max_digits=8, null=True)),
                ('combined_class', models.CharField(blank=True, help_text='e.g., AX, BZ, CY', max_length=3)),
                ('recommendation', models.TextField(blank=True, help_text='Recommended inventory management strategy')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='abc_analyses', to='inventory.product')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='abc_analyses', to='core.tenant')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='inventory.productvariant')),
            ],
            options={
                'db_table': 'abc_analyses',
            },
        ),
        migrations.AddIndex(
            model_name='warehousetransfer',
            index=models.Index(fields=['from_warehouse', 'status'], name='warehouse_t_from_wa_6a9aa2_idx'),
        ),
        migrations.AddIndex(
            model_name='warehousetransfer',
            index=models.Index(fields=['to_warehouse', 'status'], name='warehouse_t_to_ware_2a5673_idx'),
        ),
        migrations.AddIndex(
            model_name='warehousetransfer',
            index=models.Index(fields=['tenant', '-created_at'], name='warehouse_t_tenant__da3077_idx'),
        ),
        migrations.AddIndex(
            model_name='warehouselocation',
            index=models.Index(fields=['warehouse', 'location_code'], name='warehouse_l_warehou_b5cbda_idx'),
        ),
        migrations.AddIndex(
            model_name='warehouselocation',
            index=models.Index(fields=['warehouse', 'zone'], name='warehouse_l_warehou_9c17ac_idx'),
        ),
        migrations.AddIndex(
            model_name='warehouselocation',
            index=models.Index(fields=['tenant', 'location_type'], name='warehouse_l_tenant__7b9a42_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='warehouselocation',
            unique_together={('warehouse', 'location_code')},
        ),
        migrations.AddIndex(
            model_name='warehouse',
            index=models.Index(fields=['tenant', 'code'], name='warehouses_tenant__493631_idx'),
        ),
        migrations.AddIndex(
            model_name='warehouse',
            index=models.Index(fields=['branch'], name='warehouses_branch__6d7637_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='warehouse',
            unique_together={('tenant', 'code')},
        ),
        migrations.AddIndex(
            model_name='supplierperformance',
            index=models.Index(fields=['supplier', 'analysis_period_start'], name='supplier_pe_supplie_41b013_idx'),
        ),
        migrations.AddIndex(
            model_name='supplierperformance',
            index=models.Index(fields=['tenant', 'analysis_period_end'], name='supplier_pe_tenant__3bccc3_idx'),
        ),
        migrations.AddIndex(
            model_name='stocklocation',
            index=models.Index(fields=['warehouse', 'location'], name='stock_locat_warehou_dc6cf8_idx'),
        ),
        migrations.AddIndex(
            model_name='stocklocation',
            index=models.Index(fields=['product', 'warehouse'], name='stock_locat_product_a33711_idx'),
        ),
        migrations.AddIndex(
            model_name='stocklocation',
            index=models.Index(fields=['tenant', 'product'], name='stock_locat_tenant__76bc5a_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='stocklocation',
            unique_together={('location', 'product', 'variant', 'batch')},
        ),
        migrations.AddIndex(
            model_name='stockaging',
            index=models.Index(fields=['tenant', 'analysis_date'], name='stock_aging_tenant__dbac23_idx'),
        ),
        migrations.AddIndex(
            model_name='stockaging',
            index=models.Index(fields=['product', 'branch'], name='stock_aging_product_579471_idx'),
        ),
        migrations.AddIndex(
            model_name='safetystock',
            index=models.Index(fields=['product', 'branch'], name='safety_stoc_product_32af62_idx'),
        ),
        migrations.AddIndex(
            model_name='safetystock',
            index=models.Index(fields=['tenant', 'product'], name='safety_stoc_tenant__e3dae1_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='safetystock',
            unique_together={('product', 'variant', 'branch')},
        ),
        migrations.AddIndex(
            model_name='picklist',
            index=models.Index(fields=['warehouse', 'status'], name='pick_lists_warehou_b5242b_idx'),
        ),
        migrations.AddIndex(
            model_name='picklist',
            index=models.Index(fields=['tenant', '-created_at'], name='pick_lists_tenant__07cfef_idx'),
        ),
        migrations.AddIndex(
            model_name='picklist',
            index=models.Index(fields=['assigned_to', 'status'], name='pick_lists_assigne_660495_idx'),
        ),
        migrations.AddIndex(
            model_name='inventoryvaluation',
            index=models.Index(fields=['product', 'branch'], name='inventory_v_product_596a24_idx'),
        ),
        migrations.AddIndex(
            model_name='inventoryvaluation',
            index=models.Index(fields=['tenant', 'valuation_method'], name='inventory_v_tenant__01771d_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='inventoryvaluation',
            unique_together={('product', 'variant', 'branch')},
        ),
        migrations.AddIndex(
            model_name='deadstock',
            index=models.Index(fields=['tenant', 'classification'], name='dead_stocks_tenant__d19350_idx'),
        ),
        migrations.AddIndex(
            model_name='deadstock',
            index=models.Index(fields=['analysis_date'], name='dead_stocks_analysi_939e13_idx'),
        ),
        migrations.AddIndex(
            model_name='costlayer',
            index=models.Index(fields=['valuation', 'receipt_date'], name='cost_layers_valuati_1db9bf_idx'),
        ),
        migrations.AddIndex(
            model_name='costlayer',
            index=models.Index(fields=['tenant', 'receipt_date'], name='cost_layers_tenant__7c13cf_idx'),
        ),
        migrations.AddIndex(
            model_name='abcanalysis',
            index=models.Index(fields=['tenant', 'analysis_date'], name='abc_analyse_tenant__7f42f6_idx'),
        ),
        migrations.AddIndex(
            model_name='abcanalysis',
            index=models.Index(fields=['abc_class'], name='abc_analyse_abc_cla_6e1198_idx'),
        ),
        migrations.AddIndex(
            model_name='abcanalysis',
            index=models.Index(fields=['xyz_class'], name='abc_analyse_xyz_cla_7138dc_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='abcanalysis',
            unique_together={('product', 'variant', 'analysis_date', 'analysis_type')},
        ),
    ]
